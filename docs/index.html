<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.65">
<title data-react-helmet="true">Why? | Remx</title><meta data-react-helmet="true" name="docsearch:version" content="current,latest"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="Why? | Remx"><meta data-react-helmet="true" name="description" content="Writing a react / react-native project with or without TDD, we have multiple well known and battle tested choices when it comes to state management:"><meta data-react-helmet="true" property="og:description" content="Writing a react / react-native project with or without TDD, we have multiple well known and battle tested choices when it comes to state management:"><meta data-react-helmet="true" property="og:url" content="https://wix.github.io/remx/docs/"><link data-react-helmet="true" rel="shortcut icon" href="/remx/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://wix.github.io/remx/docs/"><link rel="stylesheet" href="/remx/styles.ad5bc8ba.css">
<link rel="preload" href="/remx/styles.5a0ba0ba.js" as="script">
<link rel="preload" href="/remx/runtime~main.cbafd6bd.js" as="script">
<link rel="preload" href="/remx/main.7b66b4db.js" as="script">
<link rel="preload" href="/remx/1.4f5c98c3.js" as="script">
<link rel="preload" href="/remx/2.c573395e.js" as="script">
<link rel="preload" href="/remx/33.207f3ed3.js" as="script">
<link rel="preload" href="/remx/34.861d8f02.js" as="script">
<link rel="preload" href="/remx/935f2afb.e056e739.js" as="script">
<link rel="preload" href="/remx/17896441.472300a9.js" as="script">
<link rel="preload" href="/remx/969d212d.f0433419.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/remx/"><img class="navbar__logo" src="/remx/img/logo.svg" alt="Remx Logo"><strong class="navbar__title">Remx</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/remx/docs/">Docs</a><a class="navbar__item navbar__link" href="/remx/blog">Blog</a><a class="navbar__item navbar__link" href="/remx/docs/api">API</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/wix/remx" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2aTZ"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_BsTx">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_BsTx">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/remx/"><img class="navbar__logo" src="/remx/img/logo.svg" alt="Remx Logo"><strong class="navbar__title">Remx</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/remx/docs/">Docs</a></li><li class="menu__list-item"><a class="menu__link" href="/remx/blog">Blog</a></li><li class="menu__list-item"><a class="menu__link" href="/remx/docs/api">API</a></li><li class="menu__list-item"><a href="https://github.com/wix/remx" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_2gpo"><div class="docSidebarContainer_3_JD" role="complementary"><div class="sidebar_2urC"><div class="menu menu--responsive menu_5FrY"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_Dm3K" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Introduction</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/remx/docs/">Why?</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">API</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/remx/docs/api/">API Reference</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/remx/docs/api/state">state</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/remx/docs/api/getters">getters</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/remx/docs/api/setters">setters</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/remx/docs/api/connect">connect</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/remx/docs/api/useConnect">useConnect</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/remx/docs/api/registerLoggerForDebug">registerLoggerForDebug</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3EyW"><div class="container padding-vert--lg docItemWrapper_1EkI"><div class="row"><div class="col docItemCol_2ASc"><div class="docItemContainer_3QWW"><article><header><h1 class="docTitle_1Lrw">Why?</h1></header><div class="markdown"><p>Writing a react / react-native project with or without TDD, we have multiple well known and battle tested choices when it comes to state management:</p><ul><li>local component state<ul><li>Pros: Easy to implement, zero boilerplate, works out of the box</li><li>Cons: In our opinion not very good in terms of <a href="https://en.wikipedia.org/wiki/Scalability" target="_blank" rel="noopener noreferrer">scale</a>, component becomes a <a href="https://en.wikipedia.org/wiki/God_object" target="_blank" rel="noopener noreferrer">God Object</a>, very hard to test.</li></ul></li><li>redux<ul><li>Pros: is a design pattern, scales very well, individual parts can be tested.</li><li>Cons: lots of boilerplate, hard to test-drive (TDD), tests tend to be tightly coupled to the redux library, <a href="https://en.wikipedia.org/wiki/Cohesion_(computer_science)" target="_blank" rel="noopener noreferrer">state has low cohesion</a></li></ul></li><li>mobx<ul><li>Pros: Easy to implement, almost no boilerplate, performant, high cohesion</li><li>Cons: Can be used in lots of different ways, In our opinion complex API due to large amount of features.</li></ul></li></ul><p>When we look at those battle-proven solutions, and especially if we try to build a large scale project that can be worked on by lots of different people from different teams, we see that we have a need for some combintaion of the above.
Let&#x27;s try to break down our actual requirementes and see if we can build a system that will answer those.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="what-do-we-really-need-from-a-state-management-library"></a>What do we really need from a state management library?<a aria-hidden="true" tabindex="-1" class="hash-link" href="#what-do-we-really-need-from-a-state-management-library" title="Direct link to heading">#</a></h4><p>Well for starters, starting to write our business logic by doing TDD does not require any state management at all. In fact, I would argue that it can only hinder. Try that for example: start by writing test-first all features of a JS(node) application with unit tests <em>without</em> any mention of redux. It is really difficult: if all we want to do is, for example, write a unit of logic that does some login flow, with loading state and authentication and error flows, we see that we have little use of any of these libraries.</p><p>We can just test-drive some <code>LoginFlow.js</code> with regular functions/objects, call those functions from <code>LoginFlow.test.js</code> and assert on some exported state. That&#x27;s it. No frameworks needed.</p><p>redux itself is really just an implementation of <a href="https://facebook.github.io/flux/" target="_blank" rel="noopener noreferrer">flux</a>. Which itself is a close relative of MVC.
We can take this design pattern and use it to build a scalable architecture, we just don&#x27;t need redux itself here yet as it doesn&#x27;t provide anything new and just introduces coupling and boilerplate.</p><p>So one thing we do want to enforce is some data-flow architecture. Still, no frameworks required.</p><p>Well, then where does state management come into play?</p><p>When we want to connect this <code>LoginFlow</code> into a react view. We want this view to listen to changes and re-render itself according to some presentation logic (which will be test-driven as well).</p><p>For our example, we can think about some <code>LogicComponent.jsx</code> that displays the login username and password, any sucess/failure message, and maybe a loading indicator.</p><p>All we need to do is somehow connect those 2 together. </p><p>We can&#x27;t really use redux here because it will require us to rewrite everything, and will make our business logic and tests tightly coupled to redux itself.</p><p>We can however use mobx. If we figure out a way to wrap all of our business logic with mobx&#x27;s <code>observables</code>, <code>actions</code>, and our component as <code>observer</code>, we will achieve our requiremnents.</p><p>But doing that is not as simple as wrapping everything with mobx. One major thing mobx does is impact all objects that it touches, in order to observe on their state. We want to avoid that, where possible, and <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy" target="_blank" rel="noopener noreferrer">es6 proxies</a> allows us to do just that.</p><p>Furthermore, we don&#x27;t need the large amount of features mobx supports. We need a small subset of the api, and we need to be very explicit about what goes where, to enforce our chosen redux-like data-flow architecture.</p><p>These decisions are what gave birth to remx. A mixed child of mobx implementation of observable state (backed by es6 proxies) with flux/redux design pattern enforcement. An opinionated mobx.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="but-what-about-dispatch-actions-middlewere"></a>But what about dispatch? actions? middlewere?<a aria-hidden="true" tabindex="-1" class="hash-link" href="#but-what-about-dispatch-actions-middlewere" title="Direct link to heading">#</a></h4><p>In general, redux&#x27;s middlewere is something we want to avoid. Previous experience taught us that adding just 1 middlewere to a redux store can cause serious performance hit, so we recommend not to do that and just call a function explicitly. Otherwise, if we really want, we can create our own global function that wraps any other function with some logic, for example a logging function. This can be done easily without any framework.</p><p>Actions is where we put our imperative business logic, and so we call them by simply invoking them (with arguments if needed).
Actions can be asynchronous, and shouldn&#x27;t return anything (to enforce uni-directional data flow). We don&#x27;t need any dispatching function because our stores are just plain old JS objects (that we test separately). So although not a part of the api (there&#x27;s really nothing special about <code>dispatch</code> anyway), we encourage the separation of actions and stores for low coupling, and to put action files next to the same use-case store files, for high cohesion.</p><p>Take a look at the example project to see how remx is intended to be used.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="to-conclude"></a>To conclude:<a aria-hidden="true" tabindex="-1" class="hash-link" href="#to-conclude" title="Direct link to heading">#</a></h3><ul><li>remx takes the redux (flux) architecture and enforces it through a short, simple, clean and strict API:<ul><li><code>state</code></li><li><code>setters</code></li><li><code>getters</code></li><li><code>connect</code></li></ul></li><li>almost zero boilerpate</li><li>zero impact on tests<ul><li>can be added/removed as a plugin</li><li>does not impact any design decisions</li></ul></li><li>implemented with mobx, thus benefits from all the performance of<ul><li>memoization</li><li>avoids unnecessary re-renders</li></ul></li><li>uses es6 Proxies (where possible)<ul><li>avoids mobx&#x27;s Observable wrappers which can cause weird bugs and behaviours</li></ul></li></ul></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/wix/remx/edit/master/website/docs/why.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/remx/docs/api/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">API Reference Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3SO_"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#to-conclude" class="table-of-contents__link">To conclude:</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/remx/docs/">Why?</a></li><li class="footer__item"><a class="footer__link-item" href="/remx/docs/api/">API</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow</a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord</a></li><li class="footer__item"><a href="https://twitter.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/remx/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/wix/remx" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="text--center"><div>Copyright Â© 2020 Wix.com, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/remx/styles.5a0ba0ba.js"></script>
<script src="/remx/runtime~main.cbafd6bd.js"></script>
<script src="/remx/main.7b66b4db.js"></script>
<script src="/remx/1.4f5c98c3.js"></script>
<script src="/remx/2.c573395e.js"></script>
<script src="/remx/33.207f3ed3.js"></script>
<script src="/remx/34.861d8f02.js"></script>
<script src="/remx/935f2afb.e056e739.js"></script>
<script src="/remx/17896441.472300a9.js"></script>
<script src="/remx/969d212d.f0433419.js"></script>
</body>
</html>